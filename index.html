<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Client Magnet Studio — Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { display: ['Inter', 'ui-sans-serif', 'system-ui'] },
          colors: {
            ink: '#0f172a'
          },
          boxShadow: {
            soft: '0 10px 30px rgba(0,0,0,.08)'
          },
          keyframes: {
            pulseDot: { '0%, 100%': { opacity: .3 }, '50%': { opacity: 1 } }
          },
          animation: {
            pulseDot: 'pulseDot 1.5s ease-in-out infinite'
          }
        }
      }
    }
  </script>
  <style>
    .gradient-text {
      background: linear-gradient(90deg, #7c3aed, #ec4899);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: transparent;
    }
    .card-hover { transition: transform .25s ease, box-shadow .25s ease; }
    .card-hover:hover { transform: translateY(-2px); box-shadow: 0 12px 32px rgba(0,0,0,.12); }
    .glass { background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06)); backdrop-filter: blur(10px); }
    .tag { background: rgba(255,255,255,.18); }
    .btn { transition: transform .12s ease, filter .12s ease; }
    .btn:active { transform: translateY(1px); filter: brightness(.95); }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 text-slate-100 font-display">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <header class="mb-8">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-2xl sm:text-3xl font-bold gradient-text">Client Magnet Studio</h1>
          <p class="text-slate-300 text-sm mt-1">Crée, optimise et publie du contenu qui attire tes clients idéaux.</p>
        </div>
        <div class="hidden sm:flex items-center gap-3">
          <a href="#" class="text-slate-300 text-sm hover:text-white" onclick="event.preventDefault(); openHelp();">Aide</a>
          <button class="btn px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 text-white" onclick="openProfile()">
            <span class="mr-2">👤</span> Profil
          </button>
          <div id="header-profile" class="flex items-center gap-2 px-2 py-1 rounded-lg bg-white/10">
            <div id="header-initials" class="w-7 h-7 rounded-full bg-white/20 grid place-items-center text-white text-xs font-semibold">--</div>
            <span id="header-status" class="text-xs text-slate-200">Hors ligne</span>
          </div>
          <button class="btn px-4 py-2 rounded-lg bg-white/10 hover:bg-white/15 text-white">Nouvelle campagne</button>
        </div>
      </div>
    </header>

    <!-- Master Dashboard -->
    <section class="bg-white/5 rounded-2xl p-6 shadow-soft mb-8">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-semibold gradient-text">🚀 Master Dashboard — Performance Globale</h2>
        <div class="grid grid-cols-3 gap-6">
          <div class="text-center">
            <div id="metric-revenue" class="text-2xl font-bold text-emerald-400">€12,847</div>
            <div class="text-xs text-slate-300">Revenus générés</div>
          </div>
          <div class="text-center">
            <div id="metric-roi" class="text-2xl font-bold text-sky-400">487%</div>
            <div class="text-xs text-slate-300">ROI LinkedIn</div>
          </div>
          <div class="text-center">
            <div id="metric-clients" class="text-2xl font-bold text-fuchsia-400">23</div>
            <div class="text-xs text-slate-300">Clients acquis</div>
          </div>
        </div>
      </div>

      <!-- Interconnection Status -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <div class="p-4 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 text-white card-hover">
          <h4 class="font-semibold mb-2">🔗 Modules interconnectés</h4>
          <div class="text-sm space-y-1 opacity-95">
            <div>✅ CORE ↔ AI ↔ GROWTH</div>
            <div>✅ NET ↔ LEAD ↔ SALES</div>
            <div>✅ AUTH ↔ CONV ↔ ALL</div>
          </div>
        </div>
        <div class="p-4 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 text-white card-hover">
          <h4 class="font-semibold mb-2">⚡ Performance temps réel</h4>
          <div class="text-sm space-y-1 opacity-95">
            <div>📊 Engagement: <span id="live-engagement">+127%</span></div>
            <div>🎯 Leads: <span id="live-leads">+234%</span></div>
            <div>💰 Conversions: <span id="live-conv">+189%</span></div>
          </div>
        </div>
        <div class="p-4 rounded-xl bg-gradient-to-r from-amber-500 to-rose-600 text-white card-hover">
          <h4 class="font-semibold mb-2">🤖 IA prédictive</h4>
          <div class="text-sm space-y-1 opacity-95">
            <div>🔮 Prochains clients: <span id="live-next-clients">3</span></div>
            <div>📈 Revenus 30j: <span id="live-rev-30">€4,200</span></div>
            <div>⭐ Score viral: <span id="live-viral">9.1/10</span></div>
          </div>
        </div>
        <div class="p-4 rounded-xl bg-gradient-to-r from-pink-500 to-fuchsia-600 text-white card-hover">
          <h4 class="font-semibold mb-2">🎯 Objectifs semaine</h4>
          <div class="text-sm space-y-1 opacity-95">
            <div>✅ 2 nouveaux clients</div>
            <div>🔄 50 connexions qualifiées</div>
            <div>📱 Viral post (10K+ vues)</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Modules grid -->
    <section class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <!-- Helper: small SVG icon function not used; using inline svgs per card -->
      <!-- Module Cards -->
      <button class="module-card glass text-white rounded-xl p-4 text-left card-hover w-full" onclick="showModule('core')">
        <div class="flex items-center justify-between mb-2">
          <span class="text-lg">✍️</span>
          <span class="text-[10px] tag px-2 py-1 rounded-full">CORE</span>
        </div>
        <h3 class="font-bold text-lg">Créateur IA</h3>
        <p class="text-sm opacity-90">Idées • Rédaction • Optimisation</p>
        <div class="flex items-center mt-3 text-xs">
          <span class="w-2 h-2 bg-emerald-300 rounded-full mr-2 animate-pulse"></span>
          <span>Prêt</span>
        </div>
      </button>

      <button class="module-card bg-gradient-to-br from-green-600 to-green-700 text-white rounded-xl p-4 text-left card-hover w-full" onclick="showModule('networking')">
        <div class="flex items-center justify-between mb-2">
          <span class="text-lg">🌐</span>
          <span class="text-[10px] bg-white/20 px-2 py-1 rounded-full">NET</span>
        </div>
        <h3 class="font-bold text-lg">Smart Network</h3>
        <p class="text-sm opacity-90">Contacts • Géo‑ciblage • Approche</p>
        <div class="flex items-center mt-3 text-xs">
          <span class="w-2 h-2 bg-yellow-300 rounded-full mr-2"></span>
          <span>Avantage Guadeloupe</span>
        </div>
      </button>

      <button class="module-card bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-xl p-4 text-left card-hover w-full" onclick="showModule('optimizer')">
        <div class="flex items-center justify-between mb-2">
          <span class="text-lg">🤖</span>
          <span class="text-[10px] bg-white/20 px-2 py-1 rounded-full">AI</span>
        </div>
        <h3 class="font-bold text-lg">IA Optimizer</h3>
        <p class="text-sm opacity-90">Temps réel • Prédictions • Auto</p>
        <div class="flex items-center mt-3 text-xs">
          <span class="w-2 h-2 bg-red-300 rounded-full mr-2 animate-pulse"></span>
          <span>Analyse en cours</span>
        </div>
      </button>

      <button class="module-card bg-gradient-to-br from-orange-600 to-red-600 text-white rounded-xl p-4 text-left card-hover w-full" onclick="showModule('growth')">
        <div class="flex items-center justify-between mb-2">
          <span class="text-lg">🚀</span>
          <span class="text-[10px] bg-white/20 px-2 py-1 rounded-full">HACK</span>
        </div>
        <h3 class="font-bold text-lg">Growth Hacker</h3>
        <p class="text-sm opacity-90">Viral • Trends • Intelligence</p>
        <div class="flex items-center mt-3 text-xs">
          <span class="w-2 h-2 bg-sky-300 rounded-full mr-2"></span>
          <span>ROI tracking actif</span>
        </div>
      </button>

      <button class="module-card bg-gradient-to-br from-pink-600 to-rose-600 text-white rounded-xl p-4 text-left card-hover w-full" onclick="showModule('leadmagnet')">
        <div class="flex items-center justify-between mb-2">
          <span class="text-lg">🧲</span>
          <span class="text-[10px] bg-white/20 px-2 py-1 rounded-full">LEAD</span>
        </div>
        <h3 class="font-bold text-lg">Lead Magnet Factory</h3>
        <p class="text-sm opacity-90">Capture • Convert • Nurture</p>
        <div class="flex items-center mt-3 text-xs">
          <span class="w-2 h-2 bg-emerald-300 rounded-full mr-2 animate-pulse"></span>
          <span>127 leads ce mois</span>
        </div>
      </button>

      <button class="module-card bg-gradient-to-br from-emerald-600 to-teal-600 text-white rounded-xl p-4 text-left card-hover w-full" onclick="showModule('sales')">
        <div class="flex items-center justify-between mb-2">
          <span class="text-lg">📈</span>
          <span class="text-[10px] bg-white/20 px-2 py-1 rounded-full">SALES</span>
        </div>
        <h3 class="font-bold text-lg">Sales Accelerator</h3>
        <p class="text-sm opacity-90">Pipeline • Scripts • Closing</p>
        <div class="flex items-center mt-3 text-xs">
          <span class="w-2 h-2 bg-yellow-300 rounded-full mr-2"></span>
          <span>€2,340 ce mois</span>
        </div>
      </button>

      <button class="module-card bg-gradient-to-br from-indigo-600 to-blue-600 text-white rounded-xl p-4 text-left card-hover w-full" onclick="showModule('authority')">
        <div class="flex items-center justify-between mb-2">
          <span class="text-lg">👑</span>
          <span class="text-[10px] bg-white/20 px-2 py-1 rounded-full">AUTH</span>
        </div>
        <h3 class="font-bold text-lg">Authority Builder</h3>
        <p class="text-sm opacity-90">Influence • Brand • Leader</p>
        <div class="flex items-center mt-3 text-xs">
          <span class="w-2 h-2 bg-purple-300 rounded-full mr-2"></span>
          <span>Score influence: 9.2/10</span>
        </div>
      </button>

      <button class="module-card bg-gradient-to-br from-yellow-600 to-orange-600 text-white rounded-xl p-4 text-left card-hover w-full" onclick="showModule('conversion')">
        <div class="flex items-center justify-between mb-2">
          <span class="text-lg">🎯</span>
          <span class="text-[10px] bg-white/20 px-2 py-1 rounded-full">CONV</span>
        </div>
        <h3 class="font-bold text-lg">Conversion Tracker</h3>
        <p class="text-sm opacity-90">Attribution • ROI • Prédictions</p>
        <div class="flex items-center mt-3 text-xs">
          <span class="w-2 h-2 bg-emerald-300 rounded-full mr-2 animate-pulse"></span>
          <span>Taux: 34.7%</span>
        </div>
      </button>
    </section>

    <!-- Content and Preview -->
    <section class="grid lg:grid-cols-2 gap-8">
      <!-- Composer -->
      <div class="bg-white rounded-2xl p-6 shadow-soft text-ink">
        <h2 class="text-xl font-semibold mb-6 flex items-center gap-3">
          <span class="text-blue-600">✍️</span>
          Créateur de Contenu IA
        </h2>

        <form id="composer" class="space-y-6">
          <!-- Content Input Enhanced -->
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-2">Contenu optimisé conversion</label>
            <textarea id="post-content" rows="6" class="w-full p-4 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none" placeholder="Partagez votre expertise pour attirer vos clients idéaux..." oninput="updateCharCount(); updatePreviewContent();"></textarea>
            <div class="flex justify-between items-center mt-2">
              <span class="text-sm text-slate-500">
                <span id="char-count">0</span>/3000 caractères
              </span>
              <div class="flex gap-2">
                <button type="button" onclick="addClientMagnetHashtags()" class="btn text-sm text-purple-600 hover:text-purple-700 font-medium px-3 py-1.5 rounded-lg bg-purple-50"># Hashtags Client</button>
                <button type="button" onclick="addCallToAction()" class="btn text-sm text-emerald-600 hover:text-emerald-700 font-medium px-3 py-1.5 rounded-lg bg-emerald-50">📣 Call‑to‑Action</button>
              </div>
            </div>
          </div>

          <!-- Lead Magnet Integration -->
          <div class="p-4 bg-pink-50 rounded-lg border border-pink-200">
            <div class="flex items-center justify-between mb-3">
              <h4 class="font-semibold text-pink-900">🧲 Lead Magnet intégré</h4>
              <label class="flex items-center cursor-pointer">
                <input type="checkbox" id="include-lead-magnet" class="mr-2" onchange="toggleLeadMagnet()">
                <span class="text-sm text-pink-700">Inclure lead magnet</span>
              </label>
            </div>
            <div id="lead-magnet-options" class="hidden">
              <select id="lead-magnet-select" class="w-full p-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 mb-3" onchange="updateLeadMagnetPreview()">
                <option>📋 Checklist "10 Erreurs LinkedIn à Éviter"</option>
                <option>📊 Template "Post Viral en 5 Minutes"</option>
                <option>🎯 Guide "Trouver 10 Clients en 30 Jours"</option>
                <option>💰 Calculateur "ROI LinkedIn"</option>
              </select>
              <p class="text-sm text-pink-700">Taux de conversion moyen: <span class="font-bold">34.7%</span></p>
            </div>
          </div>

          <!-- Smart Scheduling -->
          <div>
            <div class="flex items-center justify-between mb-3">
              <label class="block text-sm font-medium text-slate-700">Planification IA optimisée</label>
              <label class="flex items-center cursor-pointer">
                <input type="checkbox" id="ai-schedule-toggle" class="mr-2" onchange="toggleAIScheduling()">
                <span class="text-sm text-slate-600">IA choisit le timing optimal</span>
              </label>
            </div>
            <div id="ai-schedule-info" class="hidden p-3 bg-sky-50 rounded-lg border border-sky-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium text-sky-900">Timing optimal détecté</p>
                  <p class="text-sm text-sky-700">Demain 14h30 (GMT‑4) • +127% engagement prévu</p>
                </div>
                <span class="text-sky-600 text-xl">🧠</span>
              </div>
            </div>
          </div>

          <!-- Actions -->
          <div class="flex flex-col sm:flex-row gap-3">
            <button type="submit" class="btn flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 px-6 rounded-lg font-medium hover:from-purple-700 hover:to-pink-700">
              🚀 <span class="ml-2" id="submit-text">Publier & Capturer Leads</span>
            </button>
            <button type="button" onclick="saveDraft()" class="btn px-6 py-3 border border-slate-300 text-slate-700 rounded-lg font-medium hover:bg-slate-50">
              💾 Brouillon
            </button>
          </div>
        </form>
      </div>

      <!-- Enhanced Preview -->
      <div class="bg-white rounded-2xl p-6 shadow-soft text-ink">
        <h3 class="text-lg font-semibold mb-4 flex items-center gap-3">
          <span class="text-purple-600">👁️</span>
          Aperçu Client‑Magnet
        </h3>

        <!-- Conversion Prediction -->
        <div class="mb-4 p-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-lg">
          <div class="flex items-center justify-between">
            <div>
              <p class="font-semibold">Prédiction IA</p>
              <p class="text-sm/5 opacity-90">Ce post va générer <span class="font-bold" id="predicted-leads">12–18 leads</span></p>
            </div>
            <div class="text-right">
              <div class="text-xl font-bold" id="conversion-score">8.7/10</div>
              <div class="text-xs opacity-90">Score conversion</div>
            </div>
          </div>
        </div>

        <div class="bg-slate-50 border-l-4 border-sky-500 rounded-lg p-4">
          <div class="flex items-start gap-3 mb-4">
            <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full grid place-items-center text-white text-lg">👑</div>
            <div>
              <h4 id="preview-name" class="font-semibold text-slate-900">Votre Nom • Expert LinkedIn</h4>
              <p id="preview-sector-geo" class="text-sm text-slate-600">Secteur • Géos cibles 🌍</p>
              <p class="text-xs text-slate-500">Maintenant • <a id="preview-linkedin" href="#" target="_blank" rel="noopener noreferrer" class="underline text-sky-600 hover:text-sky-700">Profil LinkedIn</a></p>
            </div>
          </div>
          <div id="preview-content" class="text-slate-800 mb-4">
            Votre contenu client‑magnet apparaîtra ici...
          </div>
          <div id="preview-lead-magnet" class="mb-4 hidden">
            <div class="p-3 bg-gradient-to-r from-pink-100 to-purple-100 rounded-lg border border-pink-300">
              <div class="flex flex-wrap items-center gap-3">
                <span class="text-pink-600 text-xl">🎁</span>
                <div class="min-w-0">
                  <p class="font-semibold text-pink-900">Ressource gratuite</p>
                  <p class="text-sm text-pink-700 truncate" id="preview-lead-magnet-text">Checklist "10 Erreurs LinkedIn à Éviter"</p>
                </div>
                <button type="button" class="btn px-4 py-2 bg-pink-600 text-white rounded-lg text-sm font-medium" onclick="downloadLeadMagnet()">
                  Télécharger
                </button>
              </div>
            </div>
          </div>
          <div class="flex items-center justify-between pt-3 border-t border-slate-200">
            <div class="flex gap-6 text-sm text-slate-600">
              <span>👍 <span id="predicted-likes">47</span> J’aime</span>
              <span>💬 <span id="predicted-comments">12</span> Commentaires</span>
              <span>🔁 <span id="predicted-shares">8</span> Partages</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Module Panels (démo simple) -->
    <section id="panels" class="mt-10">
      <div class="grid md:grid-cols-2 gap-6">
        <div id="panel-profile" class="bg-white/5 rounded-xl p-5">
          <h4 class="font-semibold mb-3">Profil — Identité & Connexion</h4>
          <form id="profile-form" class="space-y-4" onsubmit="event.preventDefault(); saveProfile();">
            <div class="grid sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-slate-300 mb-1">Prénom</label>
                <input id="pf-first" type="text" class="w-full px-3 py-2 rounded-lg bg-white/10 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500" placeholder="Ex: Lina">
              </div>
              <div>
                <label class="block text-sm text-slate-300 mb-1">Nom</label>
                <input id="pf-last" type="text" class="w-full px-3 py-2 rounded-lg bg-white/10 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500" placeholder="Ex: Martin">
              </div>
            </div>
            <div class="grid sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-slate-300 mb-1">Secteur</label>
                <input id="pf-sector" type="text" class="w-full px-3 py-2 rounded-lg bg-white/10 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500" placeholder="Ex: Conseil, SaaS, Immobilier">
              </div>
              <div>
                <label class="block text-sm text-slate-300 mb-1">Géos cibles (monde)</label>
                <input id="pf-geo" type="text" class="w-full px-3 py-2 rounded-lg bg-white/10 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500" placeholder="Ex: France, Guadeloupe, Québec, Maroc">
              </div>
            </div>
            <div>
              <label class="block text-sm text-slate-300 mb-1">Lien profil LinkedIn</label>
              <input id="pf-linkedin" type="url" class="w-full px-3 py-2 rounded-lg bg-white/10 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500" placeholder="https://www.linkedin.com/in/votre-profil">
            </div>
            <div class="flex flex-wrap gap-3 items-center">
              <button type="submit" class="btn bg-fuchsia-600 hover:bg-fuchsia-700 text-white px-4 py-2 rounded-lg">Enregistrer</button>
              <button type="button" onclick="simulateLogin()" class="btn bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg" id="btn-login">Se connecter</button>
              <button type="button" onclick="simulateLogout()" class="btn bg-slate-700 hover:bg-slate-800 text-white px-4 py-2 rounded-lg hidden" id="btn-logout">Se déconnecter</button>
              <a id="pf-link" href="#" target="_blank" rel="noopener noreferrer" class="text-sm text-sky-300 hover:text-sky-200 underline hidden">Voir mon LinkedIn</a>
              <span class="text-xs text-slate-300">Synchronisation démo locale (pas d’API LinkedIn).</span>
            </div>
          </form>
        </div>

        <div id="panel-core" class="hidden bg-white/5 rounded-xl p-5">
          <h4 class="font-semibold mb-2">CORE — Raccourcis</h4>
          <div class="flex flex-wrap gap-2">
            <button class="btn bg-white/10 hover:bg-white/15 px-3 py-2 rounded-lg" onclick="insertSnippet('Hook puissant: ');">+ Hook</button>
            <button class="btn bg-white/10 hover:bg-white/15 px-3 py-2 rounded-lg" onclick="insertSnippet('Preuve sociale: ');">+ Preuve sociale</button>
            <button class="btn bg-white/10 hover:bg-white/15 px-3 py-2 rounded-lg" onclick="insertSnippet('Appel à l’action: ');">+ Appel</button>
          </div>
        </div>
        <div id="panel-networking" class="hidden bg-white/5 rounded-xl p-5">
          <h4 class="font-semibold mb-2">NET — Actions rapides</h4>
          <p class="text-slate-300 text-sm mb-3">Suggère 5 connexions qualifiées selon tes géos cibles.</p>
          <button class="btn bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg" onclick="proposeConnections()">Proposer</button>
          <ul id="net-list" class="text-sm text-slate-300 mt-3 list-disc pl-5"></ul>
        </div>
        <div id="panel-optimizer" class="hidden bg-white/5 rounded-xl p-5">
          <h4 class="font-semibold mb-2">AI — Optimisations</h4>
          <button class="btn bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg" onclick="simulateOptimization()">Analyser</button>
          <p id="ai-result" class="text-sm text-slate-300 mt-3"></p>
        </div>
        <div id="panel-growth" class="hidden bg-white/5 rounded-xl p-5">
          <h4 class="font-semibold mb-2">GROWTH — Boost</h4>
          <button class="btn bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg" onclick="boostTips()">Astuces virales</button>
          <ul id="growth-tips" class="text-sm text-slate-300 mt-3 list-disc pl-5"></ul>
        </div>
        <div id="panel-leadmagnet" class="hidden bg-white/5 rounded-xl p-5">
          <h4 class="font-semibold mb-2">LEAD — Ressource</h4>
          <button class="btn bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-lg" onclick="toggleLeadFromPanel()">Activer dans l’aperçu</button>
        </div>
        <div id="panel-sales" class="hidden bg-white/5 rounded-xl p-5">
          <h4 class="font-semibold mb-2">SALES — Accélérer</h4>
          <p class="text-sm text-slate-300 mb-3">Script de closing éclair prêt.</p>
          <button class="btn bg-teal-500 hover:bg-teal-600 text-white px-4 py-2 rounded-lg" onclick="insertSnippet('Question de closing: ');">Insérer une question</button>
        </div>
        <div id="panel-authority" class="hidden bg-white/5 rounded-xl p-5">
          <h4 class="font-semibold mb-2">AUTH — Autorité</h4>
          <button class="btn bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg" onclick="insertSnippet('Insight d’expert: ');">Ajouter un insight</button>
        </div>
        <div id="panel-conversion" class="hidden bg-white/5 rounded-xl p-5">
          <h4 class="font-semibold mb-2">CONV — Suivi</h4>
          <button class="btn bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg" onclick="simulateAttribution()">Estimer l’attribution</button>
          <p id="conv-result" class="text-sm text-slate-300 mt-3"></p>
        </div>
      </div>
    </section>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-5 right-5 z-50 hidden">
      <div class="bg-slate-900/90 text-white px-4 py-3 rounded-lg shadow-lg text-sm"></div>
    </div>

    <footer class="mt-12 text-center text-slate-400 text-xs">
      Interface démo — Icônes remplacées par emojis natives pour une meilleure compatibilité.
    </footer>
  </div>

  <script>
    // Helpers
    function toast(msg) {
      const t = document.getElementById('toast');
      t.firstElementChild.textContent = msg;
      t.classList.remove('hidden');
      clearTimeout(window.__toastTimer);
      window.__toastTimer = setTimeout(()=>t.classList.add('hidden'), 2200);
    }

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    // Composer logic
    function updateCharCount() {
      const el = document.getElementById('post-content');
      const count = el.value.length;
      document.getElementById('char-count').textContent = count;
    }

    function updatePreviewContent() {
      const v = document.getElementById('post-content').value.trim();
      document.getElementById('preview-content').textContent =
        v.length ? v : 'Votre contenu client‑magnet apparaîtra ici...';
    }

    function addClientMagnetHashtags() {
      const ta = document.getElementById('post-content');
      const tags = ' #clients #B2B #LinkedIn #acquisition';
      if (!ta.value.includes('#clients')) {
        ta.value = (ta.value + tags).trim();
        updateCharCount(); updatePreviewContent();
      }
      toast('Hashtags ajoutés ✅');
    }

    function addCallToAction() {
      const ta = document.getElementById('post-content');
      const cta = '\n\n➡️ Commentez “GUIDE” et je vous l’envoie.';
      if (!ta.value.includes('GUIDE')) {
        ta.value += cta;
        updateCharCount(); updatePreviewContent();
      }
      toast('Call‑to‑Action ajouté ✅');
    }

    // Lead Magnet
    function toggleLeadMagnet() {
      const checked = document.getElementById('include-lead-magnet').checked;
      document.getElementById('lead-magnet-options').classList.toggle('hidden', !checked);
      document.getElementById('preview-lead-magnet').classList.toggle('hidden', !checked);
      if (checked) updateLeadMagnetPreview();
    }

    function updateLeadMagnetPreview() {
      const sel = document.getElementById('lead-magnet-select');
      if (!sel) return;
      const text = sel.value || 'Ressource';
      document.getElementById('preview-lead-magnet-text').textContent = text.replace(/^.+? /,'').trim() || text;
    }

    function downloadLeadMagnet() {
      // Simple demo file
      const text = document.getElementById('preview-lead-magnet-text').textContent || 'Ressource';
      const blob = new Blob([`Merci ! Voici votre ${text}.\n\n— Client Magnet Studio`], {type: 'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = (text.replace(/[^a-z0-9]+/gi,'_').toLowerCase() || 'ressource') + '.txt';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      toast('Téléchargement lancé 📥');
    }

    // AI Scheduling
    function toggleAIScheduling() {
      const on = document.getElementById('ai-schedule-toggle').checked;
      document.getElementById('ai-schedule-info').classList.toggle('hidden', !on);
      toast(on ? 'Timing IA activé 🧠' : 'Timing IA désactivé');
    }

    // Panels switching
    function hideAllPanels(){
      ['core','networking','optimizer','growth','leadmagnet','sales','authority','conversion']
        .forEach(k => {
          const el = document.getElementById('panel-'+k);
          if (el) el.classList.add('hidden');
        });
    }
    function showModule(key) {
      hideAllPanels();
      const el = document.getElementById('panel-'+key);
      if (el) { el.classList.remove('hidden'); window.scrollTo({ top: el.getBoundingClientRect().top + window.scrollY - 90, behavior: 'smooth'}); }
    }

    // Panel actions
    function insertSnippet(text) {
      const ta = document.getElementById('post-content');
      const start = ta.selectionStart || ta.value.length;
      ta.value = ta.value.slice(0, start) + text + ta.value.slice(start);
      updateCharCount(); updatePreviewContent();
      toast('Ajouté au contenu ✍️');
    }
    function simulateOptimization() {
      const tips = [
        'Ajoute un hook plus spécifique.',
        'Raccourcis le 2e paragraphe.',
        'Remplace 2 emojis par des puces claires.',
        'Ajoute une preuve sociale (chiffre).',
        'Termine par 1 seul appel à l’action.'
      ];
      const pick = tips.sort(()=>0.5 - Math.random()).slice(0,3);
      document.getElementById('ai-result').textContent = 'Suggestions: ' + pick.join(' • ');
      toast('Optimisation prête 🤖');
    }
    function boostTips() {
      const items = [
        'Publie mardi 09:00 GMT‑4',
        'Pose une question fermée à la fin',
        'Mentionne un leader local (Guadeloupe)',
        'Utilise un carrousel 4 slides',
        'Accroche avec un chiffre fort'
      ];
      const list = document.getElementById('growth-tips');
      list.innerHTML = '';
      items.forEach(i => {
        const li = document.createElement('li');
        li.textContent = i;
        list.appendChild(li);
      });
      toast('5 astuces ajoutées ⚡');
    }
    function toggleLeadFromPanel() {
      const cb = document.getElementById('include-lead-magnet');
      cb.checked = !cb.checked;
      toggleLeadMagnet();
    }
    function simulateAttribution() {
      const conv = (30 + Math.random()*50).toFixed(1);
      document.getElementById('conv-result').textContent = `Attribution estimée: ${conv}% sur 14 jours.`;
      toast('Attribution estimée 🎯');
    }

    // Form submit
    document.getElementById('composer').addEventListener('submit', function(e){
      e.preventDefault();
      // fake prediction updates
      const likes = 40 + Math.floor(Math.random()*120);
      const comments = 8 + Math.floor(Math.random()*40);
      const shares = 3 + Math.floor(Math.random()*20);
      const score = (7 + Math.random()*3).toFixed(1);
      const low = Math.floor(likes * 0.18);
      const high = Math.floor(likes * 0.28);

      updatePreviewContent();
      document.getElementById('predicted-likes').textContent = likes;
      document.getElementById('predicted-comments').textContent = comments;
      document.getElementById('predicted-shares').textContent = shares;
      document.getElementById('conversion-score').textContent = `${score}/10`;
      document.getElementById('predicted-leads').textContent = `${low}–${high} leads`;
      toast('Publié (simulation) ✅ Les prédictions sont mises à jour.');
    });

    // Draft
    function saveDraft() {
      const draft = {
        content: document.getElementById('post-content').value,
        includeLead: document.getElementById('include-lead-magnet').checked,
        leadChoice: (document.getElementById('lead-magnet-select')||{}).value || '',
        aiTiming: document.getElementById('ai-schedule-toggle').checked
      };
      localStorage.setItem('cms_draft', JSON.stringify(draft));
      toast('Brouillon sauvegardé 💾');
    }
    function loadDraft() {
      try {
        const raw = localStorage.getItem('cms_draft');
        if (!raw) return;
        const d = JSON.parse(raw);
        document.getElementById('post-content').value = d.content || '';
        document.getElementById('include-lead-magnet').checked = !!d.includeLead;
        toggleLeadMagnet();
        if (d.leadChoice) {
          const sel = document.getElementById('lead-magnet-select');
          if (sel) { sel.value = d.leadChoice; updateLeadMagnetPreview(); }
        }
        document.getElementById('ai-schedule-toggle').checked = !!d.aiTiming;
        toggleAIScheduling();
        updateCharCount(); updatePreviewContent();
        toast('Brouillon chargé ✅');
      } catch(e) {}
    }

    function openHelp() {
      toast('Astuce: clique un module pour afficher ses actions.');
    }

    // Profil — gestion locale (pas d’API LinkedIn)
    function initials(first, last){
      const a = (first||'').trim()[0]||'-';
      const b = (last||'').trim()[0]||'-';
      return (a + b).toUpperCase();
    }
    function openProfile(){ showModule('profile'); }
    function saveProfile(){
      const p = {
        first: document.getElementById('pf-first').value.trim(),
        last: document.getElementById('pf-last').value.trim(),
        sector: document.getElementById('pf-sector').value.trim(),
        geo: document.getElementById('pf-geo').value.trim(),
        linkedin: document.getElementById('pf-linkedin').value.trim(),
        logged: !!window.__logged
      };
      localStorage.setItem('cms_profile', JSON.stringify(p));
      applyProfile(p);
      toast('Profil enregistré ✅');
    }
    function loadProfile(){
      try{
        const raw = localStorage.getItem('cms_profile');
        if(!raw) return;
        const p = JSON.parse(raw);
        document.getElementById('pf-first').value = p.first||'';
        document.getElementById('pf-last').value = p.last||'';
        document.getElementById('pf-sector').value = p.sector||'';
        document.getElementById('pf-geo').value = p.geo||'';
        document.getElementById('pf-linkedin').value = p.linkedin||'';
        applyProfile(p);
      }catch(e){}
    }
    function applyProfile(p){
      // header
      document.getElementById('header-initials').textContent = initials(p.first, p.last);
      document.getElementById('header-status').textContent = window.__logged ? 'Connecté' : 'Hors ligne';
      // preview
      const name = [p.first, p.last].filter(Boolean).join(' ') || 'Votre Nom';
      document.getElementById('preview-name').textContent = name + ' • Expert LinkedIn';
      const sg = [p.sector||'Secteur', p.geo||'Géos cibles 🌍'].join(' • ');
      document.getElementById('preview-sector-geo').textContent = sg;
      const link = document.getElementById('preview-linkedin');
      const linkHdr = document.getElementById('pf-link');
      if(p.linkedin){
        link.href = p.linkedin; linkHdr.href = p.linkedin; linkHdr.classList.remove('hidden');
      }
    }
    function simulateLogin(){
      window.__logged = true;
      document.getElementById('btn-login').classList.add('hidden');
      document.getElementById('btn-logout').classList.remove('hidden');
      document.getElementById('header-status').textContent = 'Connecté';
      toast('Connecté (démo) 🔄');
    }
    function simulateLogout(){
      window.__logged = false;
      document.getElementById('btn-login').classList.remove('hidden');
      document.getElementById('btn-logout').classList.add('hidden');
      document.getElementById('header-status').textContent = 'Hors ligne';
      toast('Déconnecté (démo)');
    }

    // Networking propose based on profile geo (worldwide, not limited)
    function proposeConnections(){
      const geo = (document.getElementById('pf-geo').value||'Monde').split(',').map(s=>s.trim()).filter(Boolean);
      const base = ['CMO', 'Founder', 'Sales Lead', 'HRBP', 'Ops Manager', 'Consultant', 'Head of Growth'];
      const picks = [];
      for(let i=0;i<5;i++){
        const city = geo[i%geo.length] || 'Global';
        picks.push(`${base[i%base.length]} — ${city}`);
      }
      const ul = document.getElementById('net-list');
      ul.innerHTML = '';
      picks.forEach(p=>{ const li = document.createElement('li'); li.textContent = p; ul.appendChild(li); });
      toast('Connexions proposées 🌍');
    }

    // Light live metrics shimmer
    setInterval(()=>{
      const bump = (v)=> (v>0?'+':'') + (v + (Math.random()*6 - 3)|0) + '%';
      document.getElementById('live-engagement').textContent = bump(127);
      document.getElementById('live-leads').textContent = bump(234);
      document.getElementById('live-conv').textContent = bump(189);
    }, 3000);

    document.addEventListener('DOMContentLoaded', ()=>{
      updateCharCount(); updatePreviewContent(); loadDraft(); loadProfile();
    });
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'981b88d35241e855',t:'MTc1ODMxMDYxMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
